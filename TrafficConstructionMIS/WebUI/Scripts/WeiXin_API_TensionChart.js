//flowChart.setOption(option);
//pressureChart.setOption(option);
function MyChart(id) {
    var kn1Option;
    var extend1Option;

    var kn2Option;
    var extend2Option;

    var kn3Option;
    var extend3Option;

    var kn4Option;
    var extend4Option;

    var kn1 = new Array();
    var extend1 = new Array();
    var time = new Array();

    var kn2 = new Array();
    var extend2 = new Array();

    var kn3 = new Array();
    var extend3 = new Array();

    var kn4 = new Array();
    var extend4 = new Array();

    function initOption1() {
        kn1Option = {
            title: {
                text: "一缸张拉力图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '张拉力'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '张拉力',
                    type: 'line',
                    data: kn1
                }
            ]
        };
        extend1Option = {
            title: {
                text: "一缸伸长量图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '伸长量'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '伸长量',
                    type: 'line',
                    data: extend1,
                    itemStyle: {
                        normal: {
                            color: '#9ACBB4',
                            lineStyle: {
                                color: '#9ACBB4'
                            }
                        }
                    }
                }
            ]
        };
    }

    function initOption2() {
        kn2Option = {
            title: {
                text: "二缸张拉力图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '张拉力'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '张拉力',
                    type: 'line',
                    data: kn2
                }
            ]
        };
        extend2Option = {
            title: {
                text: "二缸伸长量图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '伸长量'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '伸长量',
                    type: 'line',
                    data: extend2,
                    itemStyle: {
                        normal: {
                            color: '#9ACBB4',
                            lineStyle: {
                                color: '#9ACBB4'
                            }
                        }
                    }
                }
            ]
        };
    }

    function initOption3() {
        kn3Option = {
            title: {
                text: "三缸张拉力图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '张拉力'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '张拉力',
                    type: 'line',
                    data: kn3
                }
            ]
        };

        extend3Option = {
            title: {
                text: "三缸伸长量图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '伸长量'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '伸长量',
                    type: 'line',
                    data: extend3,
                    itemStyle: {
                        normal: {
                            color: '#9ACBB4',
                            lineStyle: {
                                color: '#9ACBB4'
                            }
                        }
                    }
                }
            ]
        };
    }

    function initOption4() {
        kn4Option = {
            title: {
                text: "四缸张拉力图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '张拉力'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '张拉力',
                    type: 'line',
                    data: kn4
                }
            ]
        };

        extend4Option = {
            title: {
                text: "四缸伸长量图",
                top: 30,
                left: '48%'
            },
            tooltip: {
                trigger: 'axis'
            },
            legend: {
                data: '伸长量'
            },
            grid: {
                left: '3%',
                right: '4%',
                bottom: '3%',
                containLabel: true
            },
            toolbox: {
                feature: {
                    saveAsImage: {}
                }
            },
            xAxis: {
                type: 'category',
                boundaryGap: false,
                data: time,
            },
            yAxis: {
                type: 'value',
            },
            series: [
                {
                    name: '伸长量',
                    type: 'line',
                    data: extend4,
                    itemStyle: {
                        normal: {
                            color: '#9ACBB4',
                            lineStyle: {
                                color: '#9ACBB4'
                            }
                        }
                    }
                }
            ]
        };
    }


    this.initChart = function () {

        $.get('GetTensionCurveData?id=' + id, function (result) {
            datas = JSON.parse(result);
            var kn1Chart = echarts.init(document.getElementById('gang1Kn'));
            var extend1Chart = echarts.init(document.getElementById('gang1Extend'));
            var kn2Chart = echarts.init(document.getElementById('gang2Kn'));
            var extend2Chart = echarts.init(document.getElementById('gang2Extend'));
            var kn3Chart = echarts.init(document.getElementById('gang3Kn'));
            var extend3Chart = echarts.init(document.getElementById('gang3Extend'));
            var kn4Chart = echarts.init(document.getElementById('gang4Kn'));
            var extend4Chart = echarts.init(document.getElementById('gang4Extend'));

            time = time.concat(datas.DateTime)
            if (datas.Gang1Flag == 1) {
                $("#gang1Kn").css("display", "block");
                $("#gang1Extend").css("display", "block");
                extend1 = extend1.concat(datas.Extend1);
                kn1 = kn1.concat(datas.Kn1);
                initOption1();
                kn1Chart.setOption(kn1Option);
                extend1Chart.setOption(extend1Option);
                kn1Chart.resize();
                extend1Chart.resize();
            }

            if (datas.Gang2Flag == 1) {
                $("#gang2Kn").css("display", "block");
                $("#gang2Extend").css("display", "block");
                kn2 = kn2.concat(datas.Kn2)
                extend2 = extend2.concat(datas.Extend2)
                initOption2();
                kn2Chart.setOption(kn2Option);
                extend2Chart.setOption(extend2Option);
                kn2Chart.resize();
                extend2Chart.resize();
            }

            if (datas.Gang3Flag == 1) {
                $("#gang3Kn").css("display", "block");
                $("#gang3Extend").css("display", "block");
                kn3 = kn3.concat(datas.Kn3)
                extend3 = extend3.concat(datas.Extend3);
                initOption3();
                extend3Chart.setOption(extend3Option);
                kn3Chart.setOption(kn3Option);
                extend3Chart.resize();
                kn3Chart.resize();
            }

            if (datas.Gang4Flag == 1) {
                $("#gang4Kn").css("display", "block");
                $("#gang4Extend").css("display", "block");
                kn4 = kn4.concat(datas.Kn4)
                extend4 = extend4.concat(datas.Extend4);
                initOption4();
                extend4Chart.setOption(extend4Option);
                kn4Chart.setOption(kn4Option);
                extend4Chart.resize();
                kn4Chart.resize();
            }

        });

    }

}

$(document).ready(function () {
    var tool = new MyTool();
    var id = tool.getUrlParam('id');
    var myChart = new MyChart(id);
    myChart.initChart();
});